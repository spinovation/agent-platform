
[0;34m========================================[0m
[0;34mAWS COST & RESOURCE AUDIT REPORT[0m
[0;34m========================================[0m

Account ID: 992505862423
Current User: arn:aws:iam::992505862423:user/agent-platform-dev
Generated: Thu Aug 14 00:12:33 EDT 2025

[0;34m========================================[0m
[0;34m1. KUBERNETES CLUSTER ANALYSIS[0m
[0;34m========================================[0m

EKS Cluster Status:
Kubernetes control plane is running at https://C3C76029EFF007368D3839B04777C486.gr7.us-east-1.eks.amazonaws.com
CoreDNS is running at https://C3C76029EFF007368D3839B04777C486.gr7.us-east-1.eks.amazonaws.com/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy

To further debug and diagnose cluster problems, use 'kubectl cluster-info dump'.

EKS Nodes:
NAME                          STATUS   ROLES    AGE   VERSION                INTERNAL-IP   EXTERNAL-IP   OS-IMAGE         KERNEL-VERSION                  CONTAINER-RUNTIME
ip-10-0-25-26.ec2.internal    Ready    <none>   13h   v1.28.15-eks-3abbec1   10.0.25.26    <none>        Amazon Linux 2   5.10.239-236.958.amzn2.x86_64   containerd://1.7.27
ip-10-0-33-217.ec2.internal   Ready    <none>   13h   v1.28.15-eks-3abbec1   10.0.33.217   <none>        Amazon Linux 2   5.10.239-236.958.amzn2.x86_64   containerd://1.7.27
ip-10-0-4-209.ec2.internal    Ready    <none>   13h   v1.28.15-eks-3abbec1   10.0.4.209    <none>        Amazon Linux 2   5.10.239-236.958.amzn2.x86_64   containerd://1.7.27

AI Platform Services:
NAME          TYPE           CLUSTER-IP      EXTERNAL-IP                                                               PORT(S)                          AGE
llm-service   LoadBalancer   172.20.173.89   a15afaf7c7d7a4622b17be3367f40f68-1446456911.us-east-1.elb.amazonaws.com   8000:30800/TCP,11434:30434/TCP   109m

[0;34m========================================[0m
[0;34m2. REGIONAL RESOURCE ANALYSIS[0m
[0;34m========================================[0m


[1;33m=== REGION: us-east-1 ===[0m

üìä EC2 Instances:
-----------------------------------------------------------------------------------------
|                                   DescribeInstances                                   |
+----------------------+------------+----------+-----------------------------+----------+
|  i-00cb09691e75d56cb |  t3.medium |  running |  2025-08-13T15:06:22+00:00  |  general |
|  i-0ea8c4ba55d36dccb |  t3.medium |  running |  2025-08-13T15:06:22+00:00  |  general |
|  i-0fcca7426db5e2370 |  t3.medium |  running |  2025-08-13T15:06:22+00:00  |  general |
+----------------------+------------+----------+-----------------------------+----------+

üíæ ElastiCache Clusters:
----------------------------------------------------------------------------------------
|                                 DescribeCacheClusters                                |
+-------------------------------+-----------------+--------+------------+--------------+
|  agent-platform-dev-redis-001 |  cache.t3.micro |  redis |  available |  us-east-1c  |
+-------------------------------+-----------------+--------+------------+--------------+

üóÑÔ∏è RDS Instances:
----------------------------------------------------------------------------------------
|                                  DescribeDBInstances                                 |
+------------------------------+--------------+-----------+------------+--------+------+
|  agent-platform-dev-postgres |  db.t3.micro |  postgres |  available |  False |  20  |
+------------------------------+--------------+-----------+------------+--------+------+

‚öñÔ∏è Load Balancers:

üåê VPCs:
--------------------------------------------------------------------------------------------
|                                       DescribeVpcs                                       |
+------------------------+------------+----------------+--------+--------------------------+
|  vpc-06a102e2fca8331cf |  available |  10.0.0.0/16   |  False |  agent-platform-dev-vpc  |
|  vpc-0528960847066c16c |  available |  172.31.0.0/16 |  True  |  None                    |
+------------------------+------------+----------------+--------+--------------------------+

üö™ NAT Gateways:
---------------------------------------------------------------------------------------------
|                                    DescribeNatGateways                                    |
+-----------------------+------------+-------------------------+----------------------------+
|  nat-094c567461ad2025c|  available |  vpc-06a102e2fca8331cf  |  subnet-00ae9d2f7faf65992  |
+-----------------------+------------+-------------------------+----------------------------+

üíø EBS Volumes:
-------------------------------------------------------------------------
|                            DescribeVolumes                            |
+------------------------+------+-----+---------+-----------------------+
|  vol-0432448f653246041 |  gp2 |  20 |  in-use |  i-0ea8c4ba55d36dccb  |
|  vol-02029eb8a63896527 |  gp2 |  20 |  in-use |  i-0fcca7426db5e2370  |
|  vol-004e7a454142735e0 |  gp2 |  20 |  in-use |  i-00cb09691e75d56cb  |
+------------------------+------+-----+---------+-----------------------+

[1;33m=== REGION: us-west-2 ===[0m

üìä EC2 Instances:

üíæ ElastiCache Clusters:
----------------------------------------------------------------------------------------
|                                 DescribeCacheClusters                                |
+-------------------------------+-----------------+--------+------------+--------------+
|  agent-platform-dev-redis-001 |  cache.t3.micro |  redis |  available |  us-west-2c  |
+-------------------------------+-----------------+--------+------------+--------------+

üóÑÔ∏è RDS Instances:

‚öñÔ∏è Load Balancers:

üåê VPCs:
--------------------------------------------------------------------------------------------
|                                       DescribeVpcs                                       |
+------------------------+------------+----------------+--------+--------------------------+
|  vpc-05cc1c4dbd82c1403 |  available |  172.31.0.0/16 |  True  |  None                    |
|  vpc-0f7d15a1cebed7df7 |  available |  10.0.0.0/16   |  False |  agent-platform-dev-vpc  |
+------------------------+------------+----------------+--------+--------------------------+

üö™ NAT Gateways:
---------------------------------------------------------------------------------------------
|                                    DescribeNatGateways                                    |
+-----------------------+------------+-------------------------+----------------------------+
|  nat-0af80b175fccfd743|  available |  vpc-0f7d15a1cebed7df7  |  subnet-0ed268f34d934bf4f  |
+-----------------------+------------+-------------------------+----------------------------+

üíø EBS Volumes:

[0;34m========================================[0m
[0;34m3. CROSS-REGION DEPENDENCY ANALYSIS[0m
[0;34m========================================[0m

üîç Checking for cross-region dependencies...

üì° CloudFront Distributions:
[1;33m‚ö†Ô∏è  WARNING: Cannot access CloudFront[0m

üè• Route 53 Health Checks:
[1;33m‚ö†Ô∏è  WARNING: Cannot access Route 53[0m

üîê KMS Keys:
KMS Keys in us-east-1:
------------------------------------------
|                ListKeys                |
+----------------------------------------+
|  1ba86602-1aa7-41c1-8348-93532936af01  |
|  53a792d2-3ad0-4bc9-91e5-f29ab58e07f1  |
|  729a63f1-cc4b-47c7-8765-9d58ac57fadd  |
+----------------------------------------+
KMS Keys in us-west-2:

[0;34m========================================[0m
[0;34m4. COST ESTIMATION ANALYSIS[0m
[0;34m========================================[0m

üí∞ Estimated Monthly Costs by Resource Type:

EKS Control Plane: ~3/month per cluster
EC2 t3.medium: ~1.68/month per instance
ElastiCache t3.micro: ~2.96/month per node
RDS t3.micro: ~3.32/month per instance
Application Load Balancer: ~8/month
NAT Gateway: ~2.40/month per gateway
EBS gp2: ~./aws-cost-audit.sh.10/GB/month

[0;34m========================================[0m
[0;34m5. OPTIMIZATION RECOMMENDATIONS[0m
[0;34m========================================[0m

üéØ Potential Cost Savings:

üîç Checking for duplicate resources...
[1;33m‚ö†Ô∏è  WARNING: Duplicate ElastiCache clusters found in both regions[0m
   üí∞ Potential savings: ~2.96/month
[1;33m‚ö†Ô∏è  WARNING: Custom VPCs found in both regions[0m
   üí∞ Check if both are needed

[0;34m========================================[0m
[0;34m6. SAFETY CHECK RESULTS[0m
[0;34m========================================[0m

üõ°Ô∏è Safety Analysis for Resource Cleanup:

Checking Oregon resource dependencies...
[0;32m‚úÖ No Kubernetes dependencies on Oregon resources[0m
[0;32m‚úÖ No load balancers in Oregon[0m

[0;34m========================================[0m
[0;34m7. CLEANUP RECOMMENDATIONS[0m
[0;34m========================================[0m

Based on the analysis above:

‚úÖ SAFE TO DELETE: Oregon ElastiCache clusters (not referenced by main infrastructure)
   Command: aws elasticache delete-cache-cluster --cache-cluster-id <cluster-id> --region us-west-2
   üí∞ Savings: ~2.96/month

‚ö†Ô∏è  INVESTIGATE: Oregon VPC - check if it has active resources
   Review NAT gateways, subnets, and route tables before deletion

üéØ Total potential monthly savings: .60 - 1.20

[0;34m========================================[0m
[0;34mAUDIT COMPLETE[0m
[0;34m========================================[0m

üìã Summary:
- Review the safety check results above
- Only delete resources marked as 'SAFE TO DELETE'
- Always backup/snapshot before deletion
- Monitor costs after cleanup

For detailed cost analysis, check AWS Cost Explorer in the console.
